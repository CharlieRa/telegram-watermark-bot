var express = require('express');
var wm = require('./');
var app = express();
var bodyParser = require('body-parser');
var methodOverride = require('method-override');
var port = process.env.PORT || 8080;


app.use(bodyParser.urlencoded({ 'extended': 'true' }));
app.use(bodyParser.json());
app.use(bodyParser.json({ type: 'application/vnd.api+json' }));
app.use(methodOverride('X-HTTP-Method-Override'));
app.get('/api', function (req, res) {

    var optionsImageWatermark = {
        type: "image",
        source: "a.png",
        logo: "logo.png", // This is optional if you have provided text Watermark
        destination: "output.png",
        position: {
            logoX : 200,
            logoY : 200,
            logoHeight: 200,
            logoWidth: 200
        }
    };

    var options = {
    source : "source/file/path",
    logo: "logo/file/path", // This is optional if you have provided text Watermark
    destination: "destination/file/path",
    position: "left-top",    // left-top, left-bottom, right-top, right-bottom
    type: "text",   // text or image
    text: "Watermark Text"  // This is optional if you have provided logo file
}


    var optionsTextWatermark = {
        type: "text",
        text: "Watermark Tasdf asdfjgyjasd ausdfh asdfuiyasdf ext", // This is optional if you have provided text Watermark
        destination: "output.png",
        source: "a.png",
        position: {
            logoX : 200,
            logoY : 200,
            logoHeight: 200,
            logoWidth: 200
        },
        textOption: {
            fontSize: 100, //In px default : 20
            color: '#AAF122' // Text color in hex default: #000000
        }
    };

    wm.embed(optionsImageWatermark, function (status) {
        //Do what you want to do here
        console.log(status);
    })
});

app.listen(port);
console.log("App listening on port " + port);
